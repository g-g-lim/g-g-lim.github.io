---
layout: page
title: "/도넛과막대그래프"
permalink: /도넛과막대그래프
---

# 도넛과막대그래프

<img src="/assets/images/도넛과막대그래프.png" width="100%" alt="도넛과막대그래프" />

```javascript
function solution(edges) {
    const { graph, centerNode } = toGraphAndFindCenterNode(edges);
    const answer = [centerNode, 0, 0, 0];
    for (const node of graph[centerNode]) {
        answer[getGraphType(node, graph)] += 1;
    }
    return answer;
}

function getGraphType(start, graph) {
    const stack = [{ current: start }];
    while (stack.length > 0) {
        const { current, visited } = stack.pop();
        if (graph[current]?.length === 2) {
            return 3;
        }
        const next = graph[current]?.[0];
        if (next === undefined) {
            return 2;
        }
        if (next === start) {
            return 1;
        }
        stack.push({ current: next });
    }
}

function toGraphAndFindCenterNode(edges) {
    const graph = {};
    let centerNode = undefined;
    const centerNodeTargets = new Set();
    for (const edge of edges) {
        const [from, to] = edge;
        if (graph[from] === undefined) {
            graph[from] = [to];
        } else {
            graph[from].push(to);
            if (centerNode === undefined) {
                if (graph[from].length > 2) {
                    console.log(graph[from]);
                    centerNode = from;
                } else {
                    centerNodeTargets.add(from);
                }
            }
        }
    }
    if (centerNode === undefined) {
        centerNode = findCenterNode(centerNodeTargets, graph)
    }
    return { graph, centerNode };
}

function findCenterNode(nodes, graph) {
    for (const node of nodes) {
        if (isCenterNode(node, graph)) {
            return node;
        }
    }
    throw Error('Not exist center node');
}

function isCenterNode(start, graph) {
    const stack = [{ visited: new Set(), current: start }];
    while (stack.length > 0) {
        const { current, visited } = stack.pop();
        const next = graph[current]?.[0];
        if (next === undefined) {
            return true;
        }
        if (next === start) {
            return false;
        }
        if (visited.has(next)) {
            return true
        }
        visited.add(next);
        stack.push({ visited, current: next });
    }
    return true;
}
```