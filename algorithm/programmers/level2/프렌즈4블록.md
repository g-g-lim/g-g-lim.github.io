---
layout: page
title: "/프렌즈4블록"
permalink: /프렌즈4블록
---

# 프렌즈4블록

<img src="/assets/images/programmers/프렌즈4블록.png" width="100%" alt="프렌즈4블록" />
<img src="/assets/images/programmers/프렌즈4블록-1.png" width="100%" alt="프렌즈4블록" />
<img src="/assets/images/programmers/프렌즈4블록-2.png" width="100%" alt="프렌즈4블록" />


```javascript
const EMPTY_BLOCK = '-';

function solution(m, n, board) {
    board = board.map(row => row.split(''));
    let answer = 0;

    while (true) {
        const removedCount = findAndRemoveBlocks(board);
        if (removedCount === 0) {
            return answer;
        }
        answer += removedCount;
        dropBlocks(board);
    }
}

function findAndRemoveBlocks(board) {
    const toRemove = new Set();

    for (let row = 0; row < board.length - 1; row++) {
        for (let col = 0; col < board[0].length - 1; col++) {
            if (board[row][col] === EMPTY_BLOCK) continue;

            if (is2x2Block(row, col, board)) {
                add2x2BlockToRemove(row, col, toRemove);
            }
        }
    }

    // Remove blocks
    for (const pos of toRemove) {
        const [row, col] = pos.split(',').map(Number);
        board[row][col] = EMPTY_BLOCK;
    }

    return toRemove.size;
}

function is2x2Block(row, col, board) {
    const currentChar = board[row][col];
    if (currentChar === EMPTY_BLOCK) return false;

    return (
        board[row][col + 1] === currentChar &&
        board[row + 1][col] === currentChar &&
        board[row + 1][col + 1] === currentChar
    );
}

function add2x2BlockToRemove(row, col, toRemove) {
    toRemove.add(`${row},${col}`);
    toRemove.add(`${row},${col + 1}`);
    toRemove.add(`${row + 1},${col}`);
    toRemove.add(`${row + 1},${col + 1}`);
}

function dropBlocks(board) {
    for (let col = 0; col < board[0].length; col++) {
        let writeRow = board.length - 1;

        for (let row = board.length - 1; row >= 0; row--) {
            if (board[row][col] !== EMPTY_BLOCK) {
                if (writeRow !== row) {
                    board[writeRow][col] = board[row][col];
                    board[row][col] = EMPTY_BLOCK;
                }
                writeRow--;
            }
        }
    }
}
```