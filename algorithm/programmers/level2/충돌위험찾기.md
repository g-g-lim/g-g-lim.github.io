---
layout: page
title: "/충돌위험찾기"
permalink: /충돌위험찾기
---

# 충돌위험찾기

<img src="/assets/images/충돌위험찾기.png" width="100%" alt="충돌위험찾기" />

```python
def solution(points, routes):
    robots = []
    for route in routes:
        rs = [tuple(points[r - 1]) for r in route]
        robots.append(shortest_path_manhattan(rs))

    answer = 0
    search = set()
    while len(search) < len(robots):
        count = {}
        for i in range(len(robots)):
            try:
                point = next(robots[i])
                if point in count:
                    count[point].append(i + 1)
                else:
                    count[point] = [i + 1]
            except StopIteration:
                search.add(i)
        for _, value in count.items():
            if len(value) > 1:
                answer += 1

    return answer

def shortest_path_manhattan(points):
    yield points[0]

    for i in range(len(points) - 1):
        x1, y1 = points[i]
        x2, y2 = points[i + 1]

        if x1 != x2:
            dx = 1 if x2 > x1 else -1
            for x in range(x1 + dx, x2 + dx, dx):
                yield (x, y1)

        if y1 != y2:
            dy = 1 if y2 > y1 else -1
            for y in range(y1 + dy, y2 + dy, dy):
                yield (x2, y)
```