---
layout: page
title: "/방금그곡"
permalink: /방금그곡
---

# 방금그곡

<img src="/assets/images/방금그곡.png" width="100%" alt="방금그곡" />

```javascript
function solution(m, musicinfos) {
    let sm = split(m);
    return musicinfos.map(play).filter((e) => compare(sm, e['music'])).sort((a,b) => {
        const pr = b['ptime'] - a['ptime'];
        return pr;
    }).map(e => e['title'])[0] ?? '(None)'
}

function diff(from, to) {
    const [fromHour, fromMinute] = from.split(':').map(Number);
    const [toHour, toMinute] = to.split(':').map(Number);
    return (toHour - fromHour) * 60 + (toMinute - fromMinute);
}

function play(info) {
    const [from, to, title, m] = info.split(',');
    const ptime = diff(from, to);

    let music = ''
    let sm = split(m);
    if (ptime < sm.length) {
        music = sm.slice(0, ptime);
    } else if (ptime === sm.length) {
        music = sm;
    } else {        
        music = m.repeat(Math.floor(ptime / sm.length))
        music += sm.slice(0, ptime % sm.length).join('')
        music = split(music);
    }
    
    return {title, music, ptime}
}

function split(m) {
    const result = [];
    for (let i = 0; i < m.length; i++) {
        if (m[i+1] === '#') {
            result.push(m.slice(i, i+2))
            i += 1;
        } else if (m[i] !== undefined) {
            result.push(m[i]);
        }
    }
    return result;
}

function compare (a, b){
    if (a.length === b.length) {
        return a.join('') === b.join('');
    }
    for (let i = 0; i < b.length - a.length + 1; i++) {
        if (b[i] !== a[0]) {
            continue;
        }
        if (b.slice(i, i + a.length).join('') === a.join('')) {
            return true;
        }
    }
    return false;
}
```